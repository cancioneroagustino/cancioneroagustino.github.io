<!DOCTYPE html>
<html lang="es">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-YES9XTRYX6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-YES9XTRYX6');
  </script>
  <meta charset="utf-8">
  <title>Crea tu programa de misa</title>
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0">
  <link rel="canonical" href="https://www.cancionerocatolico.cl/crear-programa.html">
  <link rel="stylesheet" type="text/css" href="css/cancionero.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
</head>

<body>
  <div id="nav-placeholder"></div>

  <div>
    <h1 class="seccion">Crea tu Programa de Misa</h1>
  </div>

  <div>
    <form id="programa-form">
      <h2>Agregar Canciones</h2>
      <label for="seccion">Sección de la Misa:</label>
      <select id="seccion">
        <option value="Entrada">Entrada</option>
        <option value="Perdón">Perdón</option>
        <option value="Gloria">Gloria</option>
        <option value="Aleluya">Aleluya</option>
        <option value="Leccional">Leccionales</option>
        <option value="Ofertorio">Ofertorio</option>
        <option value="Santo">Santo</option>
        <option value="Padrenuestro">Padrenuestro</option>
        <option value="Paz">Paz</option>
        <option value="Cordero">Cordero</option>
        <option value="Comunión">Comunión</option>
        <option value="Espíritu">Espíritu Santo</option>
        <option value="Salida">Salida</option>
        <option value="Mariano">Marianos</option>
        <option value="Rosario">Santo Rosario</option>
        <option value="Matrimonio">Matrimonio</option>
        <option value="LitEspecial">Liturgias especiales</option>
        <option value="Agustiniano">Agustinianos</option>
        <option value="Villancico">Villancicos</option>
        <option value="Varios">Cantos varios</option>
      </select>

      <label for="canto">Canción:</label>
      <select id="canto">
        <!-- Las opciones se llenarán dinámicamente -->
      </select>

      <button type="button" id="agregar-cancion">Agregar Canción</button>
    </form>

    <h2>Programa de Misa</h2>
    <ul id="programa-lista">
      <!-- Las canciones seleccionadas se mostrarán aquí -->
    </ul>

    <button id="crear-programa">Crear Programa</button>
  </div>

  <script>
    const canciones = {
      Entrada: {'Abre tu jardín': 'Entrada/Abre tu jardín.html', 'Aclaró': 'Entrada/Aclaró.html'},
      Perdón: {'Oh Señor ten piedad 1 (RE)': 'Perdón/Oh Señor ten piedad 1 (RE).html', 'Oh Señor ten piedad 2 (LA)': 'Perdón/Oh Señor ten piedad 2 (LA).html'},
      Gloria: {'Gloria 1': 'Gloria/gloria1.html', 'Gloria 2': 'Gloria/gloria2.html'},
      Ofertorio: {'Ofertorio 1': 'Ofertorio/ofertorio1.html', 'Ofertorio 2': 'Ofertorio/ofertorio2.html'},
      Comunión: {'Comunión 1': 'Comunión/comunion1.html', 'Comunión 2': 'Comunión/comunion2.html'},
      Salida: {'Salida 1': 'Salida/salida1.html', 'Salida 2': 'Salida/salida2.html'}
    };

    const seccionSelect = document.getElementById('seccion');
    const cantoSelect = document.getElementById('canto');
    const programaLista = document.getElementById('programa-lista');
    const programa = [];

    function actualizarCanciones() {
      const seccion = seccionSelect.value;
      const opciones = canciones[seccion];
      cantoSelect.innerHTML = '';
      for (const [nombreCorto, ruta] of Object.entries(opciones)) {
        const option = document.createElement('option');
        option.value = ruta;
        option.textContent = nombreCorto;
        cantoSelect.appendChild(option);
      }
    }

    seccionSelect.addEventListener('change', actualizarCanciones);

    document.getElementById('agregar-cancion').addEventListener('click', function() {
      const seccion = seccionSelect.value;
      const cancion = cantoSelect.value;
      const nombreCorto = cantoSelect.options[cantoSelect.selectedIndex].text;
      programa.push({seccion, cancion});
      const li = document.createElement('li');
      li.textContent = `${seccion}: ${nombreCorto}`;
      programaLista.appendChild(li);
    });

    document.getElementById('crear-programa').addEventListener('click', function() {
      localStorage.setItem('programaMisa', JSON.stringify(programa));
      window.location.href = 'programa.html';
    });

    // Inicializar la lista de canciones
    actualizarCanciones();
  </script>
</body>
</html>