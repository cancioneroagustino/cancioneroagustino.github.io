<!DOCTYPE html>
<html lang="es">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-YES9XTRYX6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-YES9XTRYX6');
  </script>
  <meta charset="utf-8">
  <title>Programa de misa</title>
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, minimum-scale=1.0">
  <link rel="canonical" href="https://www.cancionerocatolico.cl/programa.html">
  <link rel="stylesheet" type="text/css" href="css/cancionero.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
</head>

<body>
  <div id="nav-placeholder"></div>
  <script>
    $(function(){
      $("#nav-placeholder").load("navbar.html");
    });
  </script> 

  <button id="anterior">Anterior</button>
  <button id="siguiente">Siguiente</button>

  <h1 class="seccion">Programa de Misa</h1>
  <div id="programa-container"></div>


  <script>
    const programa = JSON.parse(localStorage.getItem('programaMisa'));
    if (!programa) {
      alert('No hay un programa de misa guardado.');
      window.location.href = 'crear-programa.html';
    }

    const canciones = programa.map(item => item.cancion);
    let currentIndex = 0;

    function mostrarCancion(index) {
      const programaContainer = document.getElementById('programa-container');
      programaContainer.innerHTML = `<iframe src="${canciones[index]}" width="100%" height="500px"></iframe>`;
    }

    document.getElementById('anterior').addEventListener('click', function() {
      if (currentIndex > 0) {
        currentIndex--;
        mostrarCancion(currentIndex);
      }
    });

    document.getElementById('siguiente').addEventListener('click', function() {
      if (currentIndex < canciones.length - 1) {
        currentIndex++;
        mostrarCancion(currentIndex);
      }
    });

    // Mostrar la primera canción al cargar la página
    mostrarCancion(currentIndex);
  </script>
</body>
</html>